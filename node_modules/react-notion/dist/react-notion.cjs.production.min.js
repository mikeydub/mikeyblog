"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,a=require("prismjs");require("prismjs/components/prism-jsx");var r=["video","image","embed","figma"],l=function(e){var n=e.block,a=e.mapImageUrl,l=n.value,o=n.value.type;if(!r.includes(o))return null;var i=l.format,c=null!=i?i:{},s=c.display_source,m=c.block_aspect_ratio,u=void 0===m?void 0:m,p=c.block_height,v=c.block_width,d=u||(void 0===p?1:p)/(void 0===v?1:v);if("embed"===o||"video"===o||"figma"===o)return t.createElement("div",{style:{paddingBottom:100*d+"%",position:"relative"}},t.createElement("iframe",{className:"notion-image-inset",src:"figma"===o?l.properties.source[0][0]:void 0===s?void 0:s}));if("image"===n.value.type){var g,f=a(l.properties.source[0][0],n),E=null===(g=l.properties.caption)||void 0===g?void 0:g[0][0];return u?t.createElement("div",{style:{paddingBottom:100*d+"%",position:"relative"}},t.createElement("img",{className:"notion-image-inset",alt:E||"notion image",src:f})):t.createElement("img",{alt:E,src:f})}return null},o=function(e){var n=e.code,r=e.language,l=void 0===r?"javascript":r,o=l.toLowerCase(),i=a.languages[o]||a.languages.javascript,c="language-"+l.toLowerCase();return t.createElement("pre",{className:"notion-code "+c},t.createElement("code",{className:c,dangerouslySetInnerHTML:{__html:a.highlight(n,i,l)}}))},i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return!!e})).join(" ")},c=function(e){return e.reduce((function(e,t){return e+t[0]}),"")},s=function(e,t){var n=function(e){var t=[],n=void 0,a=-1;return Object.keys(e).forEach((function(r){var l;null===(l=e[r].value.content)||void 0===l||l.forEach((function(r){var l,o,i=null===(l=e[r])||void 0===l||null===(o=l.value)||void 0===o?void 0:o.type;i&&i!==n&&(a++,n=i,t[a]=[]),t[a].push(r)})),n=void 0})),t}(t).find((function(t){return t.includes(e)}));if(n)return n.indexOf(e)+1},m=function(e,t){void 0===e&&(e="");var n=new URL("https://www.notion.so"+(e.startsWith("/image")?e:"/image/"+encodeURIComponent(e)));return t&&!e.includes("/images/page-cover/")&&(n.searchParams.set("table","space"===t.value.parent_table?"block":t.value.parent_table),n.searchParams.set("id",t.value.id),n.searchParams.set("cache","v2")),n.toString()},u=function(e){return void 0===e&&(e=""),"/"+e.replace(/-/g,"")},p=function(e){var n,a,r,l=e.block,o=e.className,s=e.big,m=e.mapImageUrl;if("page"!==(r=l.value).type&&"callout"!==r.type)return null;var u=null===(n=l.value.format)||void 0===n?void 0:n.page_icon,p=null===(a=l.value.properties)||void 0===a?void 0:a.title;if(null==u?void 0:u.includes("http")){var v=m(u,l);return t.createElement("img",{className:i(o,s?"notion-page-icon-cover":"notion-page-icon"),src:v,alt:p?c(p):"Icon"})}return t.createElement("span",{className:i(o,"notion-emoji",s?"notion-page-icon-cover":"notion-page-icon"),role:"img","aria-label":u},u)},v=function(e){var n=e.blockMap,a=e.mapPageUrl,r=e.mapImageUrl,l=Object.keys(n)[0];if(!l)return null;for(var o=[],i=l;;){var c,s,m=n[i];if(!m||!m.value)break;var u=null===(c=m.value.properties)||void 0===c?void 0:c.title[0][0],v=null===(s=m.value.format)||void 0===s?void 0:s.page_icon;if(!u&&!v)break;o.push({block:m,active:i===l,pageId:i,title:u,icon:v});var d=m.value.parent_id;if(!d)break;i=d}return o.reverse(),t.createElement("header",{className:"notion-page-header"},t.createElement("div",{className:"notion-nav-breadcrumbs"},o.map((function(e,n){return t.createElement(t.Fragment,{key:e.pageId},t.createElement("a",{className:"notion-nav-breadcrumb "+(e.active?"notion-nav-breadcrumb-active":""),href:e.active?void 0:a(e.pageId)},e.icon&&t.createElement(p,{className:"notion-nav-icon",block:e.block,mapImageUrl:r}),e.title&&t.createElement("span",{className:"notion-nav-title"},e.title)),n<o.length-1&&t.createElement("span",{className:"notion-nav-spacer"},"/"))}))))},d=function(e){var n=e.block,a=e.children,r=e.level,m=e.fullPage,u=e.hideHeader,d=e.blockMap,g=e.mapPageUrl,f=e.mapImageUrl,E=e.customBlockComponents,b=e.customDecoratorComponents,k=null==n?void 0:n.value,N=function(){var e,E,N,h,y,_,U,I,w,x,j,P=function(e){return function(n){return null==n?void 0:n.map((function(n,a){var r=n[0],l=n[1];return l?l.reduceRight((function(n,l){var o=function(){switch(l[0]){case"h":return t.createElement("span",{key:a,className:"notion-"+l[1]},n);case"c":return t.createElement("code",{key:a,className:"notion-inline-code"},n);case"b":return t.createElement("b",{key:a},n);case"i":return t.createElement("em",{key:a},n);case"s":return t.createElement("s",{key:a},n);case"a":return t.createElement("a",{className:"notion-link",href:l[1],key:a},n);default:return t.createElement(t.Fragment,{key:a},n)}},i=null==e?void 0:e[l[0]];return i?t.createElement(i,Object.assign({key:a},l[1]?{decoratorValue:l[1]}:{},{renderComponent:o}),r):o()}),t.createElement(t.Fragment,null,r)):t.createElement(t.Fragment,{key:a},r)}))}}(b);switch(null==k?void 0:k.type){case"page":if(0===r){if(m){if(!k.properties)return null;var O=k.format||{},C=O.page_icon,M=O.page_cover,F=O.page_full_width,q=O.page_small_text,L=100*(1-(O.page_cover_position||.5));return t.createElement("div",{className:"notion"},!u&&t.createElement(v,{blockMap:d,mapPageUrl:g,mapImageUrl:f}),M&&t.createElement("img",{src:f(M,n),alt:c(k.properties.title),className:"notion-page-cover",style:{objectPosition:"center "+L+"%"}}),t.createElement("main",{className:i("notion-page",!M&&"notion-page-offset",F&&"notion-full-width",q&&"notion-small-text")},C&&t.createElement(p,{className:M?"notion-page-icon-offset":void 0,block:n,big:!0,mapImageUrl:f}),t.createElement("div",{className:"notion-title"},P(k.properties.title)),a))}return t.createElement("main",{className:"notion"},a)}return k.properties?t.createElement("a",{className:"notion-page-link",href:g(k.id)},k.format&&t.createElement("div",{className:"notion-page-icon"},t.createElement(p,{block:n,mapImageUrl:f})),t.createElement("div",{className:"notion-page-text"},P(k.properties.title))):null;case"header":return k.properties?t.createElement("h1",{className:"notion-h1"},P(k.properties.title)):null;case"sub_header":return k.properties?t.createElement("h2",{className:"notion-h2"},P(k.properties.title)):null;case"sub_sub_header":return k.properties?t.createElement("h3",{className:"notion-h3"},P(k.properties.title)):null;case"divider":return t.createElement("hr",{className:"notion-hr"});case"text":if(!k.properties)return t.createElement("div",{className:"notion-blank"},"Â ");var R=null===(e=k.format)||void 0===e?void 0:e.block_color;return t.createElement("p",{className:i("notion-text",R&&"notion-"+R)},P(k.properties.title));case"bulleted_list":case"numbered_list":var B,T=function(e,n){return"bulleted_list"===k.type?t.createElement("ul",{className:"notion-list notion-list-disc"},e):t.createElement("ol",{start:n,className:"notion-list notion-list-numbered"},e)};B=k.content?t.createElement(t.Fragment,null,k.properties&&t.createElement("li",null,P(k.properties.title)),T(a)):k.properties?t.createElement("li",null,P(k.properties.title)):null;var W=n.value.type!==d[n.value.parent_id].value.type,H=s(k.id,d);return W?T(B,H):B;case"image":case"embed":case"figma":case"video":var S=n.value;return t.createElement("figure",{className:"notion-asset-wrapper",style:void 0!==S.format?{width:S.format.block_width}:void 0},t.createElement(l,{block:n,mapImageUrl:f}),S.properties.caption&&t.createElement("figcaption",{className:"notion-image-caption"},P(S.properties.caption)));case"code":if(k.properties.title)return t.createElement(o,{key:k.id,language:k.properties.language[0][0]||"",code:k.properties.title[0][0]});break;case"column_list":return t.createElement("div",{className:"notion-row"},a);case"column":var V=k.format.column_ratio,A=Number((1/V).toFixed(0));return t.createElement(t.Fragment,null,t.createElement("div",{className:"notion-column",style:{width:"calc((100% - "+46*(A-1)+"px) * "+V+")"}},a),t.createElement("div",{className:"notion-spacer",style:{width:46}}));case"quote":return k.properties?t.createElement("blockquote",{className:"notion-quote"},P(k.properties.title)):null;case"collection_view":if(!n)return null;var D=null==n||null===(E=n.collection)||void 0===E?void 0:E.types[0];return t.createElement("div",null,t.createElement("h3",{className:"notion-h3"},P(null===(N=n.collection)||void 0===N?void 0:N.title)),"table"===(null==D?void 0:D.type)&&t.createElement("div",{style:{maxWidth:"100%",marginTop:5}},t.createElement("table",{className:"notion-table"},t.createElement("thead",null,t.createElement("tr",{className:"notion-tr"},null===(h=D.format)||void 0===h||null===(y=h.table_properties)||void 0===y?void 0:y.filter((function(e){return e.visible})).map((function(e,a){var r,l;return t.createElement("th",{className:"notion-th",key:a,style:{minWidth:e.width}},null===(r=n.collection)||void 0===r||null===(l=r.schema[e.property])||void 0===l?void 0:l.name)})))),t.createElement("tbody",null,null==n||null===(_=n.collection)||void 0===_?void 0:_.data.map((function(e,a){var r,l;return t.createElement("tr",{className:"notion-tr",key:a},null===(r=D.format)||void 0===r||null===(l=r.table_properties)||void 0===l?void 0:l.filter((function(e){return e.visible})).map((function(a,r){var l,o;return t.createElement("td",{key:r,className:"notion-td "+("title"===a.property?"notion-bold":"")},P(e[null===(l=n.collection)||void 0===l||null===(o=l.schema[a.property])||void 0===o?void 0:o.name]))})))}))))),"gallery"===(null==D?void 0:D.type)&&t.createElement("div",{className:"notion-gallery"},null===(U=n.collection)||void 0===U?void 0:U.data.map((function(e,a){var r,l;return t.createElement("div",{key:"col-"+a,className:"notion-gallery-card"},t.createElement("div",{className:"notion-gallery-content"},null===(r=D.format)||void 0===r||null===(l=r.gallery_properties)||void 0===l?void 0:l.filter((function(e){return e.visible})).map((function(a,r){var l;return t.createElement("p",{key:r+"item",className:"notion-gallery-data "+(0===r?"is-first":"")},c(e[null===(l=n.collection)||void 0===l?void 0:l.schema[a.property].name]))}))))}))));case"callout":return t.createElement("div",{className:i("notion-callout",k.format.block_color&&"notion-"+k.format.block_color+"_co")},t.createElement("div",null,t.createElement(p,{block:n,mapImageUrl:f})),t.createElement("div",{className:"notion-callout-text"},P(k.properties.title)));case"bookmark":var z=k.properties.link,G=null!==(I=k.properties.title)&&void 0!==I?I:z,J=k.properties.description,K=null===(w=k.format)||void 0===w?void 0:w.block_color,Q=null===(x=k.format)||void 0===x?void 0:x.bookmark_icon,X=null===(j=k.format)||void 0===j?void 0:j.bookmark_cover;return t.createElement("div",{className:"notion-row"},t.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:i("notion-bookmark",K&&"notion-"+K),href:z[0][0]},t.createElement("div",null,t.createElement("div",{className:"notion-bookmark-title"},P(G)),J&&t.createElement("div",{className:"notion-bookmark-description"},P(J)),t.createElement("div",{className:"notion-bookmark-link"},Q&&t.createElement("img",{src:Q,alt:c(G)}),t.createElement("div",null,P(z)))),X&&t.createElement("div",{className:"notion-bookmark-image"},t.createElement("img",{src:X,alt:c(G)}))));case"toggle":return t.createElement("details",{className:"notion-toggle"},t.createElement("summary",null,P(k.properties.title)),t.createElement("div",null,a));default:return t.createElement("div",null)}return null};return E&&E[null==k?void 0:k.type]&&0!==r?t.createElement(E[null==k?void 0:k.type],{renderComponent:N,blockValue:k,level:r},a):N()};exports.NotionRenderer=function e(t){var a,r,l=t.level,o=void 0===l?0:l,i=t.currentId,c=t.mapPageUrl,s=void 0===c?u:c,p=t.mapImageUrl,v=void 0===p?m:p,g=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t.indexOf(n=l[a])>=0||(r[n]=e[n]);return r}(t,["level","currentId","mapPageUrl","mapImageUrl"]),f=g.blockMap,E=i||Object.keys(f)[0],b=f[E];return b?n.createElement(d,Object.assign({key:E,level:o,block:b,mapPageUrl:s,mapImageUrl:v},g),null==b||null===(a=b.value)||void 0===a||null===(r=a.content)||void 0===r?void 0:r.map((function(t){return n.createElement(e,Object.assign({key:t,currentId:t,level:o+1,mapPageUrl:s,mapImageUrl:v},g))}))):null},exports.classNames=i,exports.defaultMapImageUrl=m,exports.defaultMapPageUrl=u,exports.getListNumber=s,exports.getTextContent=c;
//# sourceMappingURL=react-notion.cjs.production.min.js.map
